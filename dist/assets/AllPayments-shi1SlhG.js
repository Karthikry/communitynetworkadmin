import{r as n,j as t,B as c,A as a,G as x,F as C,H as A,a as v}from"./index-BCMjTDj-.js";import{C as B}from"./CircularProgress-DMkT-NtX.js";import{A as b}from"./Alert-BxmTgsDR.js";import{P as N}from"./Pagination-DQU4BYDd.js";import"./LastPage-aK0Jz_ev.js";const w=()=>{const[l,p]=n.useState([]),[r,d]=n.useState(!0),[o,g]=n.useState(""),[i,u]=n.useState(0),[h,j]=n.useState(1),y=9,f=async e=>{d(!0),g("");try{const s=JSON.parse(sessionStorage.getItem("user")),S=(s==null?void 0:s.accessToken)||"",m=await v.get(`https://executivetracking.cloudjiffy.net/Mahaasabha/subscription/v1/getAllPaymentsByPagination/{pageNumber}/{pageSize}?pageNumber=${e}&pageSize=${y}`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${S}`}});p(m.data.content||[]),j(m.data.totalPages||1)}catch(s){console.error("Error fetching payment data:",s),g("Failed to fetch payments.")}finally{d(!1)}};n.useEffect(()=>{f(i)},[i]);const P=(e,s)=>{u(s-1)};return t.jsxs(c,{sx:{padding:2},children:[t.jsx(a,{variant:"h4",gutterBottom:!0,children:"All Payments"}),r&&t.jsx(c,{sx:{display:"flex",justifyContent:"center",marginTop:4},children:t.jsx(B,{})}),o&&t.jsx(b,{severity:"error",sx:{marginBottom:4},children:o}),t.jsxs(x,{container:!0,spacing:3,children:[!r&&!o&&l.length===0&&t.jsx(a,{variant:"h6",sx:{textAlign:"center",width:"100%"},children:"No payments found."}),l.map(e=>t.jsx(x,{item:!0,xs:12,sm:6,md:4,children:t.jsx(C,{variant:"outlined",children:t.jsxs(A,{children:[t.jsxs(a,{variant:"h6",gutterBottom:!0,children:["Payment ID: ",e.paymentid]}),t.jsxs(a,{children:[t.jsx("strong",{children:"Amount:"})," â‚¹",e.amount.toFixed(2)]}),t.jsxs(a,{children:[t.jsx("strong",{children:"Payment Date:"})," ",new Date(e.paymentDate).toLocaleDateString()]}),t.jsxs(a,{children:[t.jsx("strong",{children:"Payment Method:"})," ",e.paymentMethod]}),t.jsxs(a,{children:[t.jsx("strong",{children:"Status:"})," ",e.status]})]})})},e.paymentid))]}),!r&&h>1&&t.jsx(c,{sx:{display:"flex",justifyContent:"center",marginTop:4},children:t.jsx(N,{count:h,page:i+1,onChange:P,color:"primary"})})]})};export{w as default};
