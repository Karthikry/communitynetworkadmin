import{y as u,j as e,r as a,E,B as o,af as T,I as A,A as i,a as B}from"./index-BCMjTDj-.js";import{G as F,q as m}from"./index.module-C9gx2M6Y.js";import{C as I}from"./CircularProgress-DMkT-NtX.js";const N=u([e.jsx("path",{d:"M14 7h-4c-1.1 0-2 .9-2 2v6h2v7h4v-7h2V9c0-1.1-.9-2-2-2"},"0"),e.jsx("circle",{cx:"12",cy:"4",r:"2"},"1")],"ManOutlined"),S=u([e.jsx("path",{d:"M13.94 8.31C13.62 7.52 12.85 7 12 7s-1.62.52-1.94 1.31L7 16h3.5v6h3v-6H17z"},"0"),e.jsx("circle",{cx:"12",cy:"4",r:"2"},"1")],"Woman2Outlined"),z=()=>{const[g,L]=a.useState(!1),[r,f]=a.useState(null),[p,j]=a.useState(!0),[h,b]=a.useState(null),y=E(),x="1A";a.useEffect(()=>{(async()=>{try{const s=JSON.parse(sessionStorage.getItem("user")),c={"Content-type":"application/json",Authorization:`Bearer ${(s==null?void 0:s.accessToken)||""}`},l=await B.get(`https://executivetracking.cloudjiffy.net/Mahaasabha/membership/v1/findRootFamilyTreeByMembershipCode/${x}`,{headers:c});f(l.data)}catch(s){console.error("Error fetching family tree data:",s),b("Error fetching family tree data.")}finally{j(!1)}})()},[x]);const v=t=>{if(!t)return null;const s=n=>{if(!n)return null;const c=n.gender==="MALE"?e.jsx(N,{color:"primary"}):e.jsx(S,{sx:{color:"pink"}}),l=n.isAlive?"lightgreen":"lightcoral",k=(n.spouseMemberships||[]).map(d=>e.jsx(m,{label:e.jsxs(o,{sx:{padding:1,borderRadius:1,border:"1px solid #ccc",backgroundColor:l,display:"inline-block",marginLeft:2},children:[c,e.jsx(i,{variant:"body2",component:"span",children:d.fullName})]})},d.membershipId)),C=(n.childrenMemberships||[]).map(d=>s(d));return e.jsxs(m,{label:e.jsxs(o,{sx:{padding:1,borderRadius:1,border:"1px solid #ccc",backgroundColor:l,display:"inline-block",textAlign:"center"},children:[c,e.jsx(i,{variant:"body1",children:n.fullName})]}),children:[k,C]},n.membershipId)};return e.jsx(F,{lineWidth:"2px",lineColor:"green",lineBorderRadius:"10px",children:s(t)})},M=()=>{var t,s;y("/viewfamily",{state:{rowData:{membershipCode:x},familyTreeData:r,searchInput:"",gender:((t=r==null?void 0:r[0])==null?void 0:t.gender)||"FEMALE",isMarried:((s=r==null?void 0:r[0])==null?void 0:s.isMarried)||!1}})};return e.jsxs(o,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(T,{}),e.jsxs(o,{component:"section",sx:{flexGrow:1,transition:"margin-left 225ms cubic-bezier(0.4, 0, 0.6, 1) 0ms",marginLeft:g?"200px":"0",p:3},children:[e.jsx(A,{onClick:M,children:e.jsx(i,{variant:"body1",children:"Back to Dashboard"})}),e.jsxs(o,{sx:{textAlign:"center",mt:4},children:[p&&e.jsx(I,{}),h&&e.jsx(i,{color:"error",children:h}),!p&&!h&&r&&r.length>0?v(r[0]):e.jsx(i,{children:"No data found"})]})]})]})};export{z as default};
