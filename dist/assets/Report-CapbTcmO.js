import{d as w,i as B,j as a,r as s,b as R,a as x,I as N}from"./index-BoyrWkQt.js";import{d as _}from"./Edit-2SSNZ3I4.js";import{T as $,a as z,b as F,c,d as l,e as L,f as M}from"./TableRow-BWgOi_6U.js";var h={},U=B;Object.defineProperty(h,"__esModule",{value:!0});var j=h.default=void 0,q=U(w()),H=a;j=h.default=(0,q.default)((0,H.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");const u=[{id:"userId",label:"User ID",minWidth:100},{id:"fullName",label:"Full Name",minWidth:150},{id:"userName",label:"User Name",minWidth:150},{id:"mobileNumber",label:"Mobile Number",minWidth:150},{id:"email",label:"Email",minWidth:200},{id:"roleName",label:"Role Name",minWidth:150},{id:"createdBy",label:"Created By",minWidth:150},{id:"updatedBy",label:"Updated By",minWidth:150},{id:"insertedDate",label:"Inserted Date",minWidth:180},{id:"status",label:"Status",minWidth:120},{id:"edit",label:"Edit",minWidth:80}],K=()=>{const[o,m]=s.useState(0),[i,v]=s.useState(10),[g,y]=s.useState([]),[D,P]=s.useState(0),[I,f]=s.useState(!0);s.useEffect(()=>{(async()=>{f(!0);try{const t=JSON.parse(sessionStorage.getItem("user")),n=(t==null?void 0:t.accessToken)||"",d=await fetch(`https://executivetracking.cloudjiffy.net/Mahaasabha/userprofile/v1/getAllUserProfileByPagination/{pageNumber}/{pageSize}?pageNumber=${o}&pageSize=${i}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!d.ok)throw new Error(`Error: ${d.statusText}`);const p=await d.json(),k=p.content.map(r=>{var b;return{userId:r.userId,fullName:r.fullName||"N/A",userName:r.userName||"N/A",mobileNumber:r.mobileNumber||"N/A",email:r.email||"N/A",roleName:((b=r.roleDto)==null?void 0:b.roleName)||"N/A",createdBy:r.createdBy.userName||"N/A",updatedBy:r.updatedBy.userName||"N/A",insertedDate:S(r.insertedDate),status:r.active?"Active":"Inactive"}});y(k),P(p.totalElements)}catch(t){console.error("Failed to fetch report data:",t)}finally{f(!1)}})()},[]);const S=e=>{const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},A=(e,t)=>{m(t)},C=e=>{v(+e.target.value),m(0)},T=e=>{console.log(`Edit clicked for ID: ${e}`)},E=e=>{console.log(`Delete clicked for ID: ${e}`)},W=e=>a.jsx(x,{variant:"contained",color:e==="Active"?"success":"error",size:"small",children:e});return I?a.jsx("div",{children:"Loading..."}):a.jsxs(R,{sx:{width:"100%",overflow:"hidden",mt:5},children:[a.jsx(x,{variant:"contained",sx:{margin:"10px"},onClick:()=>console.log("Add staff clicked"),children:"+ ADD STAFF"}),a.jsx($,{sx:{maxHeight:440},children:a.jsxs(z,{stickyHeader:!0,"aria-label":"sticky table",children:[a.jsx(F,{children:a.jsx(c,{children:u.map(e=>a.jsx(l,{align:e.align||"left",style:{minWidth:e.minWidth,fontWeight:"bold"},children:e.label},e.id))})}),a.jsx(L,{children:g.length>0?g.slice(o*i,o*i+i).map(e=>a.jsx(c,{hover:!0,role:"checkbox",tabIndex:-1,children:u.map(t=>{const n=e[t.id];return t.id==="edit"?a.jsxs(l,{align:"left",children:[a.jsx(N,{onClick:()=>T(e.userId),color:"primary",children:a.jsx(_,{})}),a.jsx(N,{onClick:()=>E(e.userId),color:"secondary",children:a.jsx(j,{})})]},t.id):t.id==="status"?a.jsx(l,{align:"left",children:W(n)},t.id):a.jsx(l,{align:t.align||"left",children:n||"N/A"},t.id)})},e.userId)):a.jsx(c,{children:a.jsx(l,{colSpan:u.length,align:"center",sx:{padding:20},children:"No rows"})})})]})}),a.jsx(M,{rowsPerPageOptions:[10,25,100],component:"div",count:D,rowsPerPage:i,page:o,onPageChange:A,onRowsPerPageChange:C})]})};export{K as default};
