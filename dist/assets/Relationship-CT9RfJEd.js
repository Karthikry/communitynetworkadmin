import{r as o,j as e,c as w,b as S,I as b}from"./index-Djsfy_Oq.js";import{d as k}from"./Edit-CWCknw8m.js";import{d as E}from"./Delete-CtFrHhEW.js";import{T as N,a as R,b as v,c,d as h,e as W,f as A}from"./TableRow-DpUlrRrC.js";const p=[{id:"relationshipConstantId",label:"ID",minWidth:50},{id:"relationshipConstantType",label:"Relationship Constant",minWidth:180},{id:"description",label:"Description",minWidth:200},{id:"createdBy",label:"Created By",minWidth:150},{id:"updatedBy",label:"Updated By",minWidth:150},{id:"insertedDate",label:"Inserted Date",minWidth:180},{id:"updatedDate",label:"Updated Date",minWidth:180}],L=()=>{const[i,g]=o.useState(0),[s,m]=o.useState(10),[u,f]=o.useState([]),[y,C]=o.useState(0),[x,j]=o.useState(null);o.useEffect(()=>{(async()=>{try{const a=JSON.parse(sessionStorage.getItem("user")),l=(a==null?void 0:a.accessToken)||"",d=await fetch(`https://executivetracking.cloudjiffy.net/Mahaasabha/relationshipconstant/v1/getAllRelationshipConstantByPagination/{pageNumber}/{pageSize}?pageNumber=${i}&pageSize=${s}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});if(!d.ok)throw new Error(`Error: ${d.statusText}`);const r=await d.json(),B=r.content&&r.content.length>0?r.content.map(n=>({relationshipConstantId:n.relationshipConstantId,relationshipConstantType:n.relationshipConstantType,description:n.description,createdBy:n.createdBy.fullName||n.createdBy.userName,updatedBy:n.updatedBy.fullName||n.updatedBy.userName,insertedDate:new Date(n.insertedDate).toLocaleDateString(),updatedDate:new Date(n.updatedDate).toLocaleDateString()})):[];f(B),C(r.totalElements)}catch(a){j(a.message),console.error("Failed to fetch relationships:",a)}})()},[i,s]);const D=(t,a)=>{g(a)},T=t=>{m(+t.target.value),g(0)},P=t=>{console.log(`Edit clicked for ID: ${t}`)},I=t=>{console.log(`Delete clicked for ID: ${t}`)};return e.jsxs(w,{sx:{width:"100%",overflow:"hidden",mt:5},children:[e.jsx(S,{variant:"contained",sx:{margin:"10px"},onClick:()=>console.log("Add relationship constant clicked"),children:"+ ADD RELATIONSHIP CONSTANT"}),x&&e.jsxs("div",{style:{color:"red",textAlign:"center"},children:["Error: ",x]}),e.jsx(N,{sx:{maxHeight:440},children:e.jsxs(R,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(v,{children:e.jsx(c,{children:p.map(t=>e.jsx(h,{align:t.align||"left",style:{minWidth:t.minWidth,fontWeight:"bold"},children:t.label},t.id))})}),e.jsx(W,{children:u.length>0?u.slice(i*s,i*s+s).map(t=>e.jsx(c,{hover:!0,role:"checkbox",tabIndex:-1,children:p.map(a=>{const l=t[a.id];return e.jsx(h,{align:a.align||"left",children:a.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(b,{onClick:()=>P(t.relationshipConstantId),color:"primary",children:e.jsx(k,{})}),e.jsx(b,{onClick:()=>I(t.relationshipConstantId),color:"secondary",children:e.jsx(E,{})})]}):l||"Not Available"},a.id)})},t.relationshipConstantId)):e.jsx(c,{children:e.jsx(h,{colSpan:p.length,align:"center",sx:{padding:20},children:"No rows"})})})]})}),e.jsx(A,{rowsPerPageOptions:[10,25,100],component:"div",count:y,rowsPerPage:s,page:i,onPageChange:D,onRowsPerPageChange:T})]})};export{L as default};
