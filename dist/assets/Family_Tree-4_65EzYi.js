import{f as G,j as e,d as H,i as J,r as n,T as Q,a4 as Y,I as k,h as i,G as A,b as l,a as j,C as F,m as T}from"./index-Djsfy_Oq.js";import{C as K,G as U,m as o,f as d,q as c}from"./index.module-D5Dnqe8w.js";import{D as L,a as E}from"./DialogTitle-s7brXHWk.js";import{D as I}from"./DialogContent-DHscOiCv.js";const X=G(e.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune");var y={},Z=J;Object.defineProperty(y,"__esModule",{value:!0});var N=y.default=void 0,ee=Z(H()),se=e;N=y.default=(0,ee.default)((0,se.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");const le=()=>{const[u,R]=n.useState(""),[w,B]=n.useState([]),[v,m]=n.useState(""),[O,b]=n.useState(!1),[z,f]=n.useState(!1),[t,$]=n.useState(null),[C,P]=n.useState(null),[W,p]=n.useState(!1),g=({member:s})=>e.jsx(F,{style:{backgroundColor:s.isAlive?"#90EE90":"#ee6b6e",margin:"10px",minWidth:"120px"},children:e.jsxs(T,{style:{display:"flex",alignItems:"center"},children:[e.jsx("img",{src:s.gender==="MALE"?o:d,alt:s.gender==="MALE"?"Male":"Female",style:{width:50,height:50}}),e.jsx(i,{variant:"body1",color:"white",children:s.fullName})]})}),_=async s=>{p(!0),m("");try{const r=JSON.parse(sessionStorage.getItem("user")),a=(r==null?void 0:r.accessToken)||"",h=await j.get(`https://executivetracking.cloudjiffy.net/Mahaasabha/membership/v1/findMembershipByFullName?fullName=${s}`,{headers:{Authorization:`Bearer ${a}`}});B(h.data||[])}catch{m("Failed to fetch results")}p(!1)},M=async s=>{p(!0);try{const r=JSON.parse(sessionStorage.getItem("user")),a=(r==null?void 0:r.accessToken)||"",h=await j.get(`https://executivetracking.cloudjiffy.net/MahaasabhaMember/membership/v1/findMembershipAssociationByMembershipCode/{membershipCode}?membershipCode=${s}`,{headers:{Authorization:`Bearer ${a}`}});P(h.data),f(!0)}catch{m("Failed to fetch family tree data")}p(!1)},x=async s=>{p(!0);try{const r=JSON.parse(sessionStorage.getItem("user")),a=(r==null?void 0:r.accessToken)||"",h=await j.get(`https://executivetracking.cloudjiffy.net/MahaasabhaMember/membership/v1/findMembershipAssociationByMembershipCode/{membershipCode}?membershipCode=${s}`,{headers:{Authorization:`Bearer ${a}`}});$(h.data),b(!0)}catch{m("Failed to fetch member details")}p(!1)},D=s=>e.jsx("div",{children:e.jsxs(c,{label:e.jsx(g,{member:s}),children:[s.parentsDTO&&s.parentsDTO.map((r,a)=>e.jsx(c,{label:e.jsx(g,{member:r}),children:r.spouses&&r.spouses.map((h,V)=>e.jsx(c,{label:e.jsx(g,{member:h})},`parent-spouse-${V}`))},`parent-${a}`)),s.siblingsDto&&s.siblingsDto.length>0&&e.jsx(c,{label:e.jsx(i,{variant:"body1",color:"primary",children:"Siblings"}),children:s.siblingsDto.map((r,a)=>e.jsx(c,{label:e.jsx(g,{member:r})},`sibling-${a}`))}),s.spouseDto&&s.spouseDto.length>0&&e.jsx(c,{label:e.jsx(i,{variant:"body1",color:"primary",children:"Spouse"}),children:s.spouseDto.map((r,a)=>e.jsx(c,{label:e.jsx(g,{member:r})},`spouse-${a}`))}),s.childrenDto&&s.childrenDto.length>0&&e.jsx(c,{label:e.jsx(i,{variant:"body1",color:"primary",children:"Children"}),children:s.childrenDto.map(r=>D(r))})]})}),S=s=>{s.preventDefault(),u.trim()&&_(u)},q=s=>{const r=s.gender==="MALE";return e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(F,{style:{backgroundColor:s.isAlive?"lightgreen":"lightcoral",marginBottom:"20px"},children:e.jsxs(T,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px"},children:e.jsx("img",{src:r?o:d,alt:r?"Male":"Female",style:{width:50,height:50}})}),e.jsx(i,{variant:"h5",children:s.fullName}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Date of Birth:"})," ",new Date(s.dob).toLocaleDateString()]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Application Number:"})," ",s.applicationNumber]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Membership Code:"})," ",s.membershipCode]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Reference Membership Code:"})," ",s.referanceMembershipCode]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Female Family Ref Membership Code:"})," ",s.femaleFamilyRefMembershipCode]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Status:"})," ",s.isAlive?"Alive":"Deceased"]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Married:"})," ",s.isMarried?"Yes":"No"]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Age:"})," ",s.age]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,marginTop:"15px"},children:[e.jsx(l,{variant:"contained",style:{backgroundColor:"white",color:"blue",border:"1px solid blue"},onClick:()=>M(s.membershipCode),children:"Family Tree"}),e.jsx(l,{variant:"contained",style:{backgroundColor:"white",color:"purple",border:"1px solid purple"},onClick:()=>x(s.membershipCode),children:"Personal Text"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,marginTop:"10px"},children:[s.gender=="MALE"?e.jsx(l,{variant:"contained",style:{backgroundColor:"white",color:"blue",border:"1px solid blue"},onClick:()=>M(s.membershipCode),children:"Root Family Tree"}):"",s.gender=="FEMALE"&&s.isMarried==!0?e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,marginTop:"1px"},children:[e.jsx(l,{variant:"contained",style:{backgroundColor:"white",color:"blue",border:"1px solid blue"},children:"Husband Root Family Tree"}),e.jsx(l,{variant:"contained",style:{backgroundColor:"white",color:"purple",border:"1px solid purple"},children:"Father Root Family Tree"})]}):e.jsxs("div",{children:[" ",s.gender=="FEMALE"&&s.isMarried==!1?e.jsx(l,{variant:"contained",style:{backgroundColor:"white",color:"purple",border:"1px solid purple"},children:"Father Root Family Tree"}):""]})]})]})})},s.membershipCode)};return e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("form",{onSubmit:S,style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:e.jsx(Q,{placeholder:"Search a FullName",variant:"outlined",value:u,onChange:s=>R(s.target.value),style:{width:"70%"},InputProps:{endAdornment:e.jsxs(Y,{position:"end",children:[e.jsx(k,{onClick:S,color:"primary",children:e.jsx(N,{})}),e.jsx(k,{color:"primary",children:e.jsx(X,{})})]})}})}),W&&e.jsx(K,{style:{marginTop:"20px"}}),v&&e.jsx(i,{color:"error",children:v}),e.jsx(A,{container:!0,spacing:3,style:{padding:"10px"},children:w.map(s=>q(s))}),e.jsxs(L,{open:z,onClose:()=>f(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(E,{children:"Family Tree"}),e.jsx(I,{children:C&&e.jsx(U,{lineWidth:"2px",lineColor:"blue",lineBorderRadius:"10px",children:D(C)})})]}),e.jsxs(L,{open:O,onClose:()=>b(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(E,{children:"Personal Details"}),e.jsx(I,{children:t?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[e.jsx("img",{src:t.gender==="MALE"?o:d,alt:t.gender==="MALE"?"Male":"Female",style:{width:50,height:50}}),e.jsx(i,{variant:"h5",style:{backgroundColor:t.isAlive?"lightgreen":"lightpink",padding:"5px",borderRadius:"5px",marginLeft:"10px"},children:t.fullName})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx(i,{variant:"h6",color:"primary",children:"Parents"}),t.parentsDTO&&t.parentsDTO.length>0?t.parentsDTO.map(s=>e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[e.jsx("img",{src:s.gender==="MALE"?o:d,alt:s.gender==="MALE"?"Male":"Female",style:{width:50,height:50}}),e.jsx(l,{onClick:()=>x(s.membershipCode),children:e.jsx(i,{variant:"body1",style:{backgroundColor:s.isAlive?"lightgreen":"lightpink",padding:"5px",borderRadius:"5px",marginLeft:"10px"},children:s.fullName})})]}),s.spouses&&s.spouses.length>0&&s.spouses.map(r=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[e.jsx("img",{src:r.gender==="MALE"?o:d,alt:r.gender==="MALE"?"Male":"Female",style:{width:50,height:50}}),e.jsx(l,{onClick:()=>x(r.membershipCode),children:e.jsx(i,{variant:"body1",style:{backgroundColor:r.isAlive?"lightgreen":"lightpink",padding:"5px",borderRadius:"5px",marginLeft:"10px"},children:r.fullName})})]},r.membershipId))]},s.membershipId)):e.jsx(i,{variant:"body2",color:"textSecondary",children:"No parents data found."})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx(i,{variant:"h6",color:"primary",children:"Siblings"}),t.siblingsDto&&t.siblingsDto.length>0?t.siblingsDto.map(s=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[e.jsx("img",{src:s.gender==="MALE"?o:d,alt:s.gender==="MALE"?"Male":"Female",style:{width:50,height:50}}),e.jsx(l,{onClick:()=>x(s.membershipCode),children:e.jsx(i,{variant:"body1",style:{backgroundColor:s.isAlive?"lightgreen":"lightpink",padding:"5px",borderRadius:"5px",marginLeft:"10px"},children:s.fullName})}),e.jsx("br",{}),e.jsx("br",{})]},s.membershipId)):e.jsx(i,{variant:"body2",color:"textSecondary",children:"No siblings data found."})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx(i,{variant:"h6",color:"primary",children:"Spouse"}),t.spouseDto&&t.spouseDto.length>0?t.spouseDto.map(s=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("img",{src:s.gender==="MALE"?o:d,alt:s.gender==="MALE"?"Male":"Female",style:{width:50,height:50}}),e.jsx(l,{onClick:()=>x(s.membershipCode),children:e.jsx(i,{variant:"body1",style:{backgroundColor:s.isAlive?"lightgreen":"lightpink",padding:"5px",borderRadius:"5px",marginLeft:"10px"},children:s.fullName})})]},s.membershipId)):e.jsx(i,{variant:"body2",color:"textSecondary",children:"No spouse data found."})]}),e.jsxs("div",{children:[e.jsx(i,{variant:"h6",color:"primary",children:"Children"}),t.childrenDto&&t.childrenDto.length>0?t.childrenDto.map(s=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[e.jsx("img",{src:s.gender==="MALE"?o:d,alt:s.gender==="MALE"?"Male":"Female",style:{width:50,height:50}}),e.jsx(l,{onClick:()=>x(s.membershipCode),children:e.jsx(i,{variant:"body1",style:{backgroundColor:s.isAlive?"lightgreen":"lightpink",padding:"5px",borderRadius:"5px",marginLeft:"10px"},children:s.fullName})}),e.jsx("br",{}),e.jsx("br",{})]},s.membershipId)):e.jsx(i,{variant:"body2",color:"textSecondary",children:"No children data found."})]})]}):e.jsx(i,{children:"Loading details..."})})]})]})};export{le as default};
