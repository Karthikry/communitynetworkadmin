import{u as T,r as l,j as e,M as E,G as g,g as M,a as s,b as N}from"./index-BoyrWkQt.js";import{T as P,a as A,b as F,c as o,d as n,e as S,f as k}from"./TableRow-BWgOi_6U.js";const h=[{id:"membershipId",label:"ID",minWidth:120},{id:"applicationNumber",label:"Application Number",minWidth:180},{id:"membershipCode",label:"Membership Code",minWidth:180},{id:"referanceMembershipCode",label:"Reference Membership Code",minWidth:200},{id:"isAlive",label:"Is Alive",minWidth:120},{id:"fullName",label:"Full Name",minWidth:200},{id:"dob",label:"Date of Birth",minWidth:160},{id:"age",label:"Age",minWidth:120},{id:"bloodGroup",label:"Blood Group",minWidth:150},{id:"mobileNumber",label:"Mobile Number",minWidth:180},{id:"alternativeMobileNumber",label:"Alternative Mobile Number",minWidth:200},{id:"gothra",label:"Gothra",minWidth:150},{id:"emailId",label:"Email ID",minWidth:200},{id:"gender",label:"Gender",minWidth:120},{id:"isMarried",label:"Is Married",minWidth:160},{id:"femaleFamilyRefMembershipCode",label:"Female Family Ref Membership Code",minWidth:200},{id:"occupation",label:"Occupation",minWidth:180},{id:"qualification",label:"Qualification",minWidth:180},{id:"address",label:"Address",minWidth:250},{id:"city",label:"City",minWidth:150},{id:"country",label:"Country",minWidth:150},{id:"edit",label:"Edit",align:"center",minWidth:120},{id:"delete",label:"Delete",align:"center",minWidth:120}],w=()=>{const u=T(),[d,c]=l.useState(0),[r,x]=l.useState(10),[m,f]=l.useState([]),[y,j]=l.useState(0),[b,W]=l.useState(null),v=async()=>{try{const i=JSON.parse(sessionStorage.getItem("user")),a=(i==null?void 0:i.accessToken)||"",t=await fetch(`https://executivetracking.cloudjiffy.net/Mahaasabha/membership/v1/getAllMembershipByPagination/{pageNumber}/{pageSize}?pageNumber=${d}&pageSize=${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!t.ok)throw new Error(`Error: ${t.status}`);const p=await t.json();f(p.content||[]),j(p.totalElements||0)}catch(i){W(i.message),console.error("Failed to fetch family data:",i)}};l.useEffect(()=>{v()},[d,r]);const C=()=>{console.log("Add Family button clicked")};return e.jsxs(E,{title:"Family Details",children:[e.jsx(g,{container:!0,spacing:M,justifyContent:"flex-end",children:e.jsx(g,{item:!0,children:e.jsx(s,{variant:"contained",color:"primary",onClick:C,children:"Add Family"})})}),e.jsxs(N,{sx:{width:"100%",overflow:"hidden",marginTop:u.spacing(2)},children:[b&&e.jsxs("div",{style:{color:"red"},children:["Error: ",b]}),e.jsx(P,{sx:{maxHeight:440},children:e.jsxs(A,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(F,{children:e.jsx(o,{children:h.map(i=>e.jsx(n,{align:i.align,style:{minWidth:i.minWidth,fontWeight:600,fontSize:15,padding:"16px 24px"},children:i.label},i.id))})}),e.jsx(S,{children:m.length>0?m.map(i=>e.jsx(o,{hover:!0,role:"checkbox",tabIndex:-1,children:h.map(a=>{const t=i[a.id];return a.id==="edit"?e.jsx(n,{align:a.align,children:e.jsx(s,{variant:"outlined",color:"primary",onClick:()=>console.log("Edit:",i.membershipId),children:"Edit"})},a.id):a.id==="delete"?e.jsx(n,{align:a.align,children:e.jsx(s,{variant:"outlined",color:"secondary",onClick:()=>console.log("Delete:",i.membershipId),children:"Delete"})},a.id):typeof t=="boolean"?e.jsx(n,{align:a.align,style:{padding:"16px 24px"},children:t?"Yes":"No"},a.id):e.jsx(n,{align:a.align,style:{padding:"16px 24px"},children:t!=null&&t!==""?t:"Not Available"},a.id)})},i.membershipId)):e.jsx(o,{children:e.jsx(n,{colSpan:h.length,align:"center",children:"No data available"})})})]})}),e.jsx(k,{rowsPerPageOptions:[10,25,100],component:"div",count:y,rowsPerPage:r,page:d,onPageChange:(i,a)=>c(a),onRowsPerPageChange:i=>{x(+i.target.value),c(0)}})]})]})};export{w as default};
